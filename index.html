<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Racing Game Build Calculator</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body class="bg-slate-950 text-slate-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        const Icon = ({ name, className }) => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, [name]);
            return <i data-lucide={name} className={className}></i>;
        };

        const PART_TYPES = ['ENGINE', 'EXHAUST', 'SUSPENSION', 'GEARBOX', 'TRINKET_1', 'TRINKET_2'];

        const STAT_CONFIG = [
            { key: 'Speed', unit: '', color: 'text-blue-400', group: 'Movement' },
            { key: 'StartBoost', unit: '', color: 'text-orange-400', group: 'Movement' },
            { key: 'BoostPads', unit: '%', color: 'text-orange-300', group: 'Movement' },
            { key: 'SlowAreaPenalty', unit: '%', color: 'text-red-400', group: 'Movement' },
            { key: 'TrickSpd', unit: '', color: 'text-blue-300', group: 'Movement' },
            { key: 'Steer', unit: '', color: 'text-emerald-400', group: 'Handling' },
            { key: 'DriftSteer', unit: '', color: 'text-purple-400', group: 'Handling' },
            { key: 'DriftRate', unit: '%', color: 'text-purple-300', group: 'Handling' },
            { key: 'AirDriftTime', unit: '', color: 'text-sky-300', group: 'Handling' },
            { key: 'T1', unit: '', color: 'text-slate-400', group: 'Technical' },
            { key: 'T2', unit: '', color: 'text-slate-400', group: 'Technical' },
            { key: 'T3', unit: '', color: 'text-slate-400', group: 'Technical' },
            { key: 'StartCoins', unit: '', color: 'text-yellow-400', group: 'Coins' },
            { key: 'MaxCoins', unit: '', color: 'text-yellow-600', group: 'Coins' },
            { key: 'MaxCoinsSpd', unit: '', color: 'text-yellow-700', group: 'Coins' },
            { key: 'CoinBoostSpd', unit: '', color: 'text-yellow-300', group: 'Coins' },
            { key: 'CoinBoostTime', unit: '', color: 'text-yellow-200', group: 'Coins' },
            { key: 'UltCharge', unit: '%', color: 'text-pink-400', group: 'Combat' },
            { key: 'UltStart', unit: '', color: 'text-pink-300', group: 'Combat' },
            { key: 'Daze', unit: '%', color: 'text-amber-500', group: 'Combat' },
            { key: 'SlipStreamRadius', unit: '', color: 'text-indigo-400', group: 'Combat' },
            { key: 'SlipStreamSpd', unit: '', color: 'text-cyan-400', group: 'Combat' },
            { key: 'SlipTime', unit: '', color: 'text-indigo-300', group: 'Combat' },
        ];

        const STAT_KEYS = STAT_CONFIG.map(s => s.key);

        const BUILD_GOALS = [
            { id: 'race', label: 'RACE', icon: 'trophy', color: 'text-blue-500' },
            { id: 'coin', label: 'COIN', icon: 'coins', color: 'text-yellow-500' },
            { id: 'drift', label: 'DRIFT', icon: 'zap', color: 'text-purple-500' },
            { id: 'combat', label: 'COMBAT', icon: 'sword', color: 'text-red-500' }
        ];

        const PARTS_DATABASE = {
            ENGINE: [
                { name: "Advanced Engine", stats: { Speed: 1, StartBoost: 1, DriftSteer: 1, Steer: 1, AirDriftTime: 0.2, UltCharge: 20, SlipStreamRadius: 1, SlipStreamSpd: 1, T3: 1 } },
                { name: "Banker Engine", stats: { Speed: -0.2, StartBoost: -0.5, CoinBoostSpd: -5, StartCoins: 3, MaxCoins: 10, DriftSteer: -2, Steer: -2, BoostPads: 10, T3: -0.5, MaxCoinsSpd: 2 } },
                { name: "Basic Engine", stats: { Speed: 0.5 } },
                { name: "Scrapwork Engine", stats: { Speed: 1.6, StartBoost: 0.5, DriftSteer: -5, Steer: -4, UltCharge: 35, SlipStreamRadius: 2, T3: 0.5, MaxCoinsSpd: -5, DriftRate: -0.8 } },
                { name: "Chrome Engine", stats: { Speed: 0.5, StartBoost: 1.6, CoinBoostSpd: 10, T3: 1.6 } },
                { name: "Clean Engine", stats: { DriftSteer: 0.5, Steer: 0.5, UltCharge: 100, T1: 0.4, T2: 0.5, TrickSpd: 5 } },
                { name: "Cyber Engine", stats: { Speed: 0.5, StartBoost: 1.2, DriftSteer: 0.5, Steer: 0.5, UltCharge: 5, T3: 1.2, TrickSpd: 5 } },
                { name: "Featherweight Engine", stats: { Speed: 0.3, DriftSteer: 1, Steer: 1, AirDriftTime: 0.2, SlowAreaPenalty: -12, UltCharge: 30, T1: 0.8, TrickSpd: 5 } },
                { name: "Fresh Engine", stats: { StartCoins: 0.2, DriftSteer: 0.3, BoostPads: 4, TrickSpd: 3.2 } },
                { name: "Frontrunner Engine", stats: { Speed: -0.2, StartBoost: 1, CoinBoostSpd: 15, CoinBoostTime: 10, StartCoins: 0.5, MaxCoins: 1, DriftSteer: 1.4, T3: 1, MaxCoinsSpd: -1 } },
                { name: "Spooky Engine", stats: { Speed: 0.6, StartBoost: 10, T1: 0.6, TrickSpd: 3 } },
                { name: "Heavyweight Engine", stats: { Speed: 1.3, CoinBoostSpd: 5, CoinBoostTime: 0.5, StartCoins: 2, MaxCoins: 5, DriftSteer: -4.5, Steer: -3.5, SlowAreaPenalty: 50, MaxCoinsSpd: 0.8, TrickSpd: -3 } },
                { name: "Vulcan Engine", stats: { Speed: 0.5, StartBoost: 1, StartCoins: -1, MaxCoins: 0.5, DriftSteer: -2, SlowAreaPenalty: 100, DriftRate: 2.5 } },
                { name: "No Coiner Engine", stats: { Speed: 3.2, StartBoost: 1, CoinBoostSpd: -10, StartCoins: -2, MaxCoins: -5.2, T2: 1.5, T3: 1, TrickSpd: 4 } },
                { name: "Piggybank Engine", stats: { StartCoins: 2, MaxCoins: 10, DriftSteer: -2.7, MaxCoinsSpd: 4.5 } },
                { name: "Scrap Engine", stats: { Speed: 0, T1: 0.4, T2: 0.5, T3: 0.5, TrickSpd: 3.5 } },
                { name: "Silver Engine", stats: { Speed: 0, T1: 0.5, T2: 0.7, T3: 1.4 } },
                { name: "Snail Engine", stats: { Speed: 8, DriftSteer: -2.5, Steer: 50, AirDriftTime: -30, SlowAreaPenalty: 18, Daze: 30, UltCharge: 7, SlipStreamRadius: 0.8, BoostPads: 10 } },
                { name: "Starter Engine", stats: { Speed: 0.6, StartCoins: 1, DriftSteer: 0.6, T1: 0.8 } }
            ],
            EXHAUST: [
                { name: "Acrobatic Exhaust", stats: { CoinBoostTime: 1, DriftSteer: 1.2, Steer: 1.2, AirDriftTime: 0.13, TrickSpd: 2 } },
                { name: "Ice Exhaust", stats: { CoinBoostSpd: 5, CoinBoostTime: 0.6, Speed: 0.5, T1: 0.8, T3: 1 } },
                { name: "Discharged Exhaust", stats: { Steer: 1.6, Speed: -20, SlowAreaPenalty: 10, SlipStreamSpd: 2.5, TrickSpd: 3.5 } },
                { name: "Cyber Exhaust", stats: { UltCharge: 17, TrickSpd: 3.5 } },
                { name: "Iron Exhaust", stats: { StartBoost: 10, CoinBoostSpd: -5, CoinBoostTime: 2.5, SlowAreaPenalty: 5, UltCharge: 25, SlipStreamRadius: 3.5, SlipStreamSpd: 1.2, BoostPads: 5, TrickSpd: 3.5 } },
                { name: "Light Exhaust", stats: { CoinBoostTime: 1, DriftSteer: 0.2, AirDriftTime: 0.15, Speed: 10, Daze: 15, SlipStreamRadius: 3, TrickSpd: 5 } },
                { name: "Fresh Exhaust", stats: { CoinBoostTime: 5, StartCoins: 0.3, DriftSteer: 0.2, AirDriftTime: 0.1, SlipStreamRadius: 4, SlipStreamSpd: 0.3 } },
                { name: "Spooky Exhaust", stats: { CoinBoostTime: -0.5, DriftSteer: 1.6, AirDriftTime: 0.2, UltCharge: 30, SlipStreamRadius: 1, T1: 0.4 } },
                { name: "Heavy Exhaust", stats: { StartBoost: 1, CoinBoostSpd: 1, CoinBoostTime: 2, StartCoins: 1, BoostPads: 20 } },
                { name: "Simple Coin Exhaust", stats: { StartCoins: 3, CoinBoostTime: 0.5 } },
                { name: "Starter Exhaust", stats: { CoinBoostSpd: 5, CoinBoostTime: 0.3, Steer: 0.3, T3: 1 } },
                { name: "Polished Exhaust", stats: { CoinBoostTime: 1.3, AirDriftTime: 0.1, Speed: 0.25, UltCharge: 18, SlipStreamRadius: 2, SlipStreamSpd: 1.4, BoostPads: 13, TrickSpd: 3 } },
                { name: "Ulti-Matey Exhaust", stats: { Daze: 7.5, UltCharge: 20 } },
                { name: "Gold Exhaust", stats: { Steer: 0.25, TrickSpd: 7.5 } }
            ],
            SUSPENSION: [
                { name: "Acrobatic Suspension", stats: { Speed: -0.6, DriftSteer: 2, Steer: 2, AirDriftTime: 0.25, UltCharge: 5, SlipStreamRadius: 3.5, SlipStreamSpd: 0.5, BoostPads: 10, TrickSpd: 3.5 } },
                { name: "Advanced Suspension", stats: { DriftSteer: 1.5, Steer: 1.5, AirDriftTime: 0.3, UltCharge: 10, T1: 0.8, T3: 0.5 } },
                { name: "Ice Suspension", stats: { Speed: 1, CoinBoostSpd: -5, DriftSteer: -1.5, Steer: -1.5, AirDriftTime: 0.2, SlowAreaPenalty: 0.3, T3: 1, TrickSpd: 3 } },
                { name: "First Charge Suspension", stats: { DriftSteer: 0.5, Steer: 0.5, SlowAreaPenalty: -6, UltCharge: 3, T1: 3.2, T2: -2, T3: -2 } },
                { name: "Fresh Suspension", stats: {} },
                { name: "Spooky Suspension", stats: { Speed: 0.2, MaxCoins: 0.8, DriftSteer: 2, Steer: 2, AirDriftTime: 0.1, SlowAreaPenalty: 0.3, Daze: -20, BoostPads: 5, T1: 1, MaxCoinsSpd: 2 } },
                { name: "Slime Suspension", stats: { StartBoost: 8, MaxCoins: 1, UltCharge: 10, SlipStreamRadius: 5.5, T1: 1.6, T2: 0.5, T3: -0.5 } },
                { name: "Locked Suspension", stats: { Steer: 1.2, SlowAreaPenalty: 60 } },
                { name: "No Drift Suspension", stats: { Speed: 2, CoinBoostSpd: 5, DriftSteer: -5, Steer: 30, UltCharge: 10, DriftRate: -0.6, T2: -0.8, T3: -1.2, MaxCoinsSpd: -5 } },
                { name: "Peanutician Suspension", stats: { MaxCoins: 2.2, DriftSteer: 1, AirDriftTime: 0.6, T1: 0.8, MaxCoinsSpd: 2.2 } },
                { name: "Snail Suspension", stats: { MaxCoins: -1, SlowAreaPenalty: -10, UltCharge: 3, BoostPads: 10 } },
                { name: "Starter Suspension", stats: { MaxCoins: 1.2, SlowAreaPenalty: -15, UltCharge: 7, MaxCoinsSpd: 1.2 } },
                { name: "Train Suspension", stats: { Speed: 1.3, StartBoost: 15, DriftSteer: -2, Steer: -2, AirDriftTime: 0.2, SlowAreaPenalty: 25, UltCharge: 3, BoostPads: 15, T1: 0.3, T2: 0.3, T3: 0.3, MaxCoinsSpd: -2 } },
                { name: "Polished Suspension", stats: { Speed: 0.5, MaxCoins: 0.5, SlowAreaPenalty: -15, BoostPads: 5 } }
            ],
            GEARBOX: [
                { name: "Advanced Gearbox", stats: { DriftSteer: 0.5, T1: 1, T2: 0.6, T3: 1.5 } },
                { name: "Chaotic Gearbox", stats: { UltCharge: -10, T1: -1.6, T2: 3.2, T3: -2 } },
                { name: "Gamers Gearbox", stats: { AirDriftTime: 0.4, T1: -1, T2: 0.5, T3: 1.85 } },
                { name: "Fresh Gearbox", stats: { AirDriftTime: 0.1, T1: 0.3, T2: 0.4, T3: 0.6 } },
                { name: "The Front Runner", stats: { StartBoost: 12, T1: 0.4, T2: 0.7, T3: 1.2 } },
                { name: "Grass Gearbox", stats: { T1: 0.4, T2: 0.5, T3: 1 } },
                { name: "Spooky Gearbox", stats: { AirDriftTime: 0.1, T1: 0.4, T2: 2, T3: 0.6 } },
                { name: "Dragon Head Gearbox", stats: { StartBoost: 5, CoinBoostTime: 1, StartCoins: 1, T1: 1.8, T3: 1 } },
                { name: "Efficient Gearbox", stats: { StartBoost: 10, DriftSteer: -0.5, Steer: -0.5, AirDriftTime: 0.5, UltCharge: 20, SlipStreamRadius: 3.5, BoostPads: 7.5, T1: 2.1, T2: 1, T3: -1.2, MaxCoinsSpd: -0.5, TrickSpd: 2.5 } },
                { name: "Ice Gearbox", stats: { StartCoins: 1, MaxCoins: 1, DriftSteer: 1 } },
                { name: "No Drift Gearbox", stats: { Speed: 2.5, SlowAreaPenalty: -12, UltCharge: 20, SlipStreamRadius: 10, SlipStreamSpd: 3.5, T1: -0.8, T2: -1, T3: -2, SlipTime: 1 } },
                { name: "Razor Gearbox", stats: { DriftSteer: -0.5, Steer: -0.5, T1: 1.4, T3: 0.4 } },
                { name: "Recovery Gold Gearbox", stats: { SlowAreaPenalty: -30, T1: 1.8 } },
                { name: "Marine Gearbox", stats: { SlowAreaPenalty: -20, T1: 1.2 } },
                { name: "Starter Gearbox", stats: { StartBoost: 1, DriftSteer: 1, Steer: 1, DriftRate: -0.025, T2: 0.4, T3: 0.5 } },
                { name: "Hasty Gearbox", stats: { DriftRate: 0.025, T1: -1.6, T2: 2, T3: 1.35 } },
                { name: "Ancient Gearbox", stats: { T1: 0.85, T2: 1.3, T3: 1.1 } },
                { name: "Polished Gearbox", stats: { DriftRate: 0.1, T1: -0.8, T2: -1, T3: -1 } }
            ],
            TRINKET: [
                { name: "Electronic Key", stats: { DriftSteer: 0.5, Steer: 0.5, UltCharge: 5, SlipStreamRadius: 10, SlipStreamSpd: 3, UltStart: 3 } },
                { name: "Gold Tags", stats: { StartCoins: 1, SlipStreamRadius: 20, BoostPads: 15, T3: 1 } },
                { name: "Skull Collar", stats: { StartBoost: -15, MaxCoins: 5, Daze: -10, UltCharge: 5, MaxCoinsSpd: 0.8 } },
                { name: "Turtle Trinket", stats: { CoinBoostSpd: 10, CoinBoostTime: 1, DriftSteer: 2, Steer: 2, UltCharge: 3, TrickSpd: 2 } },
                { name: "Tank Trinket", stats: { StartBoost: -5, Speed: 0.4, DriftSteer: -2, SlowAreaPenalty: -20, Daze: 5, T2: 1, T3: 1, MaxCoinsSpd: 0.4 } },
                { name: "Capytulator", stats: { Daze: 60, UltCharge: 5, BoostPads: 17.5, MaxCoinsSpd: 0.5 } },
                { name: "Air Freshener", stats: { T1: 1.6, TrickSpd: 8 } },
                { name: "Fast Runner", stats: { T1: 1.6 } },
                { name: "Cauldron", stats: { CoinBoostTime: 0.5, Speed: 1, T1: 0.5, T2: 0.4, T3: 0.3 } },
                { name: "Fire Keys", stats: { StartCoins: 1, MaxCoins: 1, SlowAreaPenalty: -20, UltCharge: 10, SlipStreamRadius: 15, SlipStreamSpd: 5.5, T1: 0.8, T2: 0.4, T3: 0.4, MaxCoinsSpd: 0.5, UltStart: 10 } },
                { name: "Lucky Dice", stats: { StartBoost: 8, StartCoins: 2, UltCharge: 15, SlipStreamRadius: 12, SlipStreamSpd: 20, T1: 1.6, UltStart: 15, SlipTime: 1 } },
                { name: "Inheritance", stats: { StartCoins: 5, MaxCoinsSpd: -0.5 } },
                { name: "Voodoo", stats: { MaxCoins: -1 } },
                { name: "Community Card", stats: { CoinBoostTime: 0.5, AirDriftTime: 0.07, Speed: 0.25, BoostPads: 5, T1: 0.6, T2: 0.4, T3: 0.5, MaxCoinsSpd: 0.25 } },
                { name: "Ducky", stats: { SlowAreaPenalty: -20, SlipStreamRadius: 25, SlipStreamSpd: 6.5, SlipTime: 3 } },
                { name: "Anchor", stats: { SlowAreaPenalty: 50, Daze: -20, BoostPads: 10, UltStart: 10 } },
                { name: "Disco Ball", stats: { CoinBoostSpd: 15, CoinBoostTime: 0.5, BoostPads: 12, TrickSpd: 3 } },
                { name: "Starter Keys", stats: { UltCharge: 15, BoostPads: 10, T1: 0.8, UltStart: 15 } },
                { name: "Toxic Tag", stats: { Speed: 0.2, SlowAreaPenalty: -30, UltCharge: 4, DriftRate: -8, T3: 1.5, MaxCoinsSpd: 0.2, DriftSteer: -1, Steer: -1 } },
                { name: "Tourney Tag", stats: { StartBoost: 15, CoinBoostTime: 1.8, Speed: 0.2, UltCharge: 15, UltStart: 15, TrickSpd: 2 } },
                { name: "Water Rider", stats: { DriftSteer: 1, Steer: 1, SlowAreaPenalty: 80, Daze: -10, UltCharge: -20, SlipStreamSpd: 6.5, BoostPads: 5, SlipTime: 1.5, TrickSpd: 2.5 } }
            ]
        };

        const App = () => {
            const [build, setBuild] = useState({
                ENGINE: { name: '', stats: {} },
                EXHAUST: { name: '', stats: {} },
                SUSPENSION: { name: '', stats: {} },
                GEARBOX: { name: '', stats: {} },
                TRINKET_1: { name: '', stats: {} },
                TRINKET_2: { name: '', stats: {} }
            });

            const totals = useMemo(() => {
                const res = {};
                STAT_KEYS.forEach(key => {
                    res[key] = Object.values(build).reduce((acc, part) => {
                        return acc + (Number(part.stats[key]) || 0);
                    }, 0);
                });
                return res;
            }, [build]);

            const scores = useMemo(() => ({
                race: (totals.Speed * 2) + (totals.StartBoost * 1.5) + (totals.SlipStreamSpd * 1.2) - (totals.SlowAreaPenalty || 0),
                coin: (totals.StartCoins * 1) + (totals.MaxCoins * 2) + (totals.CoinBoostSpd * 1.5) + (totals.CoinBoostTime * 1.5),
                drift: (totals.DriftSteer * 2) + (totals.Steer * 1.5) + (totals.AirDriftTime || 0),
                combat: (totals.UltCharge * 2) + (totals.Daze * 1.5) + (totals.SlipStreamRadius || 0)
            }), [totals]);

            const updateStat = (slot, stat, value) => {
                setBuild(prev => ({
                    ...prev,
                    [slot]: {
                        ...prev[slot],
                        stats: {
                            ...prev[slot].stats,
                            [stat]: value === '' ? '' : parseFloat(value)
                        }
                    }
                }));
            };

            const selectFromDatabase = (slot, partName) => {
                if (!partName) return;
                const dbKey = slot.startsWith('TRINKET') ? 'TRINKET' : slot;
                const partData = PARTS_DATABASE[dbKey].find(p => p.name === partName);
                if (partData) {
                    setBuild(prev => ({
                        ...prev,
                        [slot]: {
                            name: partData.name,
                            stats: { ...partData.stats }
                        }
                    }));
                }
            };

            const clearSlot = (slot) => setBuild(prev => ({ ...prev, [slot]: { name: '', stats: {} } }));

            const renderStatGroup = (groupName, iconName) => {
                const groupStats = STAT_CONFIG.filter(s => s.group === groupName);
                return (
                    <div key={groupName} className="mb-6 last:mb-0">
                        <h3 className="text-[10px] font-black text-slate-500 uppercase tracking-widest mb-3 flex items-center gap-2 italic">
                            <Icon name={iconName} className="w-3 h-3" /> {groupName}
                        </h3>
                        <div className="space-y-2.5">
                            {groupStats.map(({ key, unit, color }) => (
                                <div key={key} className="flex justify-between items-center group">
                                    <span className="text-[11px] font-semibold text-slate-400 group-hover:text-slate-200 transition-colors uppercase truncate mr-2">{key}</span>
                                    <span className={`font-mono ${color} font-bold text-xs`}>
                                        {(totals[key] || 0).toLocaleString(undefined, { maximumFractionDigits: 2 })}{unit}
                                    </span>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            return (
                <div className="min-h-screen p-4 md:p-8">
                    <div className="max-w-7xl mx-auto">
                        <header className="mb-8 flex flex-col lg:flex-row lg:items-center justify-between gap-6 border-b border-slate-800 pb-8">
                            <div className="flex items-center gap-4">
                                <div className="bg-gradient-to-br from-indigo-500 to-indigo-700 p-3 rounded-2xl shadow-xl shadow-indigo-500/20 ring-1 ring-white/10">
                                    <Icon name="calculator" className="w-8 h-8 text-white" />
                                </div>
                                <div>
                                    <h1 className="text-3xl font-black tracking-tighter italic uppercase leading-none">Racing Builder</h1>
                                    <p className="text-slate-500 text-xs font-bold tracking-[0.3em] uppercase mt-2">v3.0</p>
                                </div>
                            </div>
                            
                            <div className="flex gap-2 sm:gap-4 overflow-x-auto pb-2 sm:pb-0 scrollbar-hide">
                                {BUILD_GOALS.map(goal => (
                                    <div key={goal.id} className="flex flex-col items-center px-5 py-3 bg-slate-900/50 rounded-2xl border border-slate-800 min-w-[100px] shadow-lg ring-1 ring-white/5">
                                        <span className={`text-[10px] font-black tracking-widest mb-1 ${goal.color}`}>{goal.label}</span>
                                        <span className="text-xl font-black">{scores[goal.id].toLocaleString(undefined, { maximumFractionDigits: 1 })}</span>
                                    </div>
                                ))}
                            </div>
                        </header>

                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
                            <div className="lg:col-span-3 lg:sticky lg:top-8 order-2 lg:order-1">
                                <div className="bg-slate-900 rounded-3xl p-6 border border-slate-800 shadow-2xl ring-1 ring-white/5">
                                    <h2 className="text-xs font-black text-white uppercase tracking-[0.2em] mb-8 flex items-center gap-3 italic border-b border-slate-800 pb-2">
                                        <Icon name="layout-panel-left" className="w-4 h-4 text-indigo-500" /> Stats Summary
                                    </h2>
                                    {renderStatGroup('Movement', 'gauge')}
                                    <div className="my-4 border-t border-slate-800/50" />
                                    {renderStatGroup('Handling', 'activity')}
                                    <div className="my-4 border-t border-slate-800/50" />
                                    {renderStatGroup('Coins', 'coins')}
                                    <div className="my-4 border-t border-slate-800/50" />
                                    {renderStatGroup('Combat', 'sword')}
                                    <div className="my-4 border-t border-slate-800/50" />
                                    {renderStatGroup('Technical', 'target')}
                                </div>
                            </div>

                            <div className="lg:col-span-9 space-y-6 order-1 lg:order-2">
                                <h2 className="text-xl font-black flex items-center gap-3 italic tracking-tight uppercase text-slate-300 px-2">
                                    <Icon name="database" className="w-5 h-5 text-indigo-500" /> Equipment Setup
                                </h2>
                                
                                <div className="grid grid-cols-1 gap-6">
                                    {PART_TYPES.map(slot => {
                                        const dbKey = slot.startsWith('TRINKET') ? 'TRINKET' : slot;
                                        return (
                                            <div key={slot} className="bg-slate-900/40 border border-slate-800 rounded-3xl overflow-hidden transition-all hover:border-indigo-500/30 ring-1 ring-white/5 shadow-2xl group">
                                                <div className="bg-slate-800/30 px-6 py-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 border-b border-slate-800">
                                                    <div className="flex items-center gap-4 w-full sm:w-auto">
                                                        <span className="px-4 py-1.5 bg-indigo-600 rounded-xl text-[10px] font-black tracking-widest text-white uppercase italic shadow-lg shadow-indigo-600/30">
                                                            {slot.replace('_', ' ')}
                                                        </span>
                                                        <div className="flex-1 sm:flex-none relative">
                                                            <select 
                                                                className="w-full sm:w-64 bg-slate-950 border border-slate-700 rounded-xl text-xs py-2.5 px-4 focus:ring-2 focus:ring-indigo-500 outline-none text-slate-300 appearance-none cursor-pointer pr-10"
                                                                onChange={(e) => selectFromDatabase(slot, e.target.value)}
                                                                value={PARTS_DATABASE[dbKey].some(p => p.name === build[slot].name) ? build[slot].name : ""}
                                                            >
                                                                <option value="">Select from Database...</option>
                                                                {PARTS_DATABASE[dbKey].map(p => (
                                                                    <option key={p.name} value={p.name}>{p.name}</option>
                                                                ))}
                                                            </select>
                                                            <Icon name="chevron-down" className="absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-600 pointer-events-none" />
                                                        </div>
                                                    </div>
                                                    <button onClick={() => clearSlot(slot)} className="p-2.5 text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-xl transition-all"><Icon name="trash-2" className="w-4 h-4" /></button>
                                                </div>
                                                <div className="p-6 grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-x-4 gap-y-6">
                                                    {STAT_CONFIG.map(({ key, unit, color }) => (
                                                        <div key={key} className="space-y-1 group/input">
                                                            <label className="text-[9px] font-black uppercase tracking-tighter opacity-50 block truncate group-hover/input:opacity-100 transition-opacity" title={key}>{key}</label>
                                                            <input 
                                                                type="number" 
                                                                placeholder="0" 
                                                                step="0.01"
                                                                className={`w-full bg-slate-950/50 border border-slate-800 rounded-lg px-2 py-1.5 text-xs text-center focus:border-indigo-500 outline-none font-mono transition-all ${color}`}
                                                                value={build[slot].stats[key] ?? ''}
                                                                onChange={(e) => updateStat(slot, key, e.target.value)}
                                                            />
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        </div>
                    </div>
                    <footer className="mt-16 text-center border-t border-slate-900 pt-12 pb-16">
                        <p className="text-slate-700 text-[10px] font-black tracking-[0.5em] uppercase italic leading-loose">
                            Build Your Legacy • 23 Mechanical Metrics • v3.0
                        </p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>